
%define name    integrated-team-tracker
%define version 0.0.2

Name:      %{name}
Version:   %{version}
Release:   1
Source:    %{name}-%{version}.tgz
Summary:   fully integrated redmine setup
Group:     Development
License:   GPLv3
Vendor:    purplehaze.ch
BuildRoot: /tmp/%{name}-%{version}-root
# make this rpm relocatable
Prefix:    /usr/%{name}

%description
Fully integrated redmine package that may be installed in a slotted
manner by using the rpm relocatable feature. The idea is that each
team may use this to setup a redmine instance with the least amount
of pain involved. This contains quite some sub packages since it
will be used to configure a load of services on various systems.
This base package only contains the needed libraries. See the 
subpackages for more info:
- team
- puppet
- hudson
- jabber

%package team
Group:   Development
Summary: The team package contains the redmine install

%description team
The actual redmine installation in a relocateable way useable for
multi installs. The forthcoming puppet module will use this to
install multiple puppet frontends.

#%package puppet
#Group:   Development
#Summary: puppet recipies for full integration

%prep
%setup 

%install
[ "$RPM_BUILD_ROOT" != "/" ] && rm -rf $RPM_BUILD_ROOT
echo $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT/usr/%{name}
cp -r redmine $RPM_BUILD_ROOT/usr/%{name}/
cp -r .rvm    $RPM_BUILD_ROOT/usr/%{name}/

%files
# basic 'userhome' where our redmine instance will live
/usr/%{name}/.rvm/

%files team
/usr/%{name}/redmine/

#%files puppet
